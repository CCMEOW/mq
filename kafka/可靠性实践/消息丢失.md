# 消息丢失

一条消息从生产到消费通常经历三个阶段，因此消息丢失问题，因此相应地从这个三个阶段采取相应的解决方式。
![消息发送过程](/images/消息发送过程.png)  
生产消息: 从Producer发送到MQ Broker
存储/同步消息: Broker保存消息，可能是将消息同步至副本(如Kafka)，或者是存储到磁盘(如RocketMQ)
消费消息: 消息从Broker到Consumer端

1. 生产消息

    生产者发送消息到Broker，可能因为网络问题并未发送过去，可以拿到消息发送的结果，根据失败的原因决定重试或者是别的操作。  
    Kafka的发送消息可以是同步的或者异步的，如果是异步的，可以通过回调函数获取发送消息的结果并进行处理。  
    同步获取结果的代码示例:  
    ```java
    
    
    ```

